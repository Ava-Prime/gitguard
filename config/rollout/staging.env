# GitGuard Codex - Staging Environment Configuration
# Zero-drama rollout: Phase 1 - Staging Cut
# Deploy Codex with publish_portal set to build-only (no external publish)

# Core Codex Settings
CODEX_PUBLISH_ENABLED=true
CODEX_PUBLISH_PORTAL=build-only
CODEX_EMBEDDINGS_ENABLED=false
CODEX_OWNERS_ENABLED=false

# Database Configuration
DATABASE_URL=postgresql+psycopg://codex_staging:${CODEX_STAGING_DB_PASSWORD}@localhost:5432/codex_staging

# JetStream Configuration
JETSTREAM_URL=nats://localhost:4222
JETSTREAM_STREAM=codex-staging
JETSTREAM_RETENTION_POLICY=limits
JETSTREAM_MAX_AGE=72h
JETSTREAM_MAX_MSGS=-1
JETSTREAM_MAX_BYTES=-1

# Logging and Monitoring
LOG_LEVEL=INFO
METRICS_ENABLED=true
METRICS_PORT=9090

# Safety Settings
MAX_CONCURRENT_BUILDS=2
BUILD_TIMEOUT=300s
DOCS_BUILD_ENABLED=true
DOCS_PUBLISH_ENABLED=false

# Repository Filtering (empty = all repos)
CODEX_REPO_INCLUDE_LIST=
CODEX_REPO_EXCLUDE_LIST=

# Feature Toggles for Testing
CODEX_DEBUG_MODE=true
CODEX_DRY_RUN=false
